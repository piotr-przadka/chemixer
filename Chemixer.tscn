[gd_scene load_steps=20 format=2]

[ext_resource path="res://scripts/GUI/CompoundSelect.gd" type="Script" id=1]
[ext_resource path="res://scenes/2D/MainVial.tscn" type="PackedScene" id=2]
[ext_resource path="res://Chemixer.gd" type="Script" id=3]
[ext_resource path="res://assets/images/background.svg" type="Texture" id=4]
[ext_resource path="res://assets/fonts/default.tres" type="DynamicFont" id=5]
[ext_resource path="res://scripts/TaskController.gd" type="Script" id=6]
[ext_resource path="res://icon.png" type="Texture" id=7]
[ext_resource path="res://assets/fonts/large.tres" type="DynamicFont" id=8]
[ext_resource path="res://scenes/2D/StirringRod.tscn" type="PackedScene" id=9]
[ext_resource path="res://assets/fonts/very_large.tres" type="DynamicFont" id=10]
[ext_resource path="res://assets/fonts/medium_large.tres" type="DynamicFont" id=11]
[ext_resource path="res://scripts/GUI/SelectTaskButton.gd" type="Script" id=12]
[ext_resource path="res://scripts/AnimationController.gd" type="Script" id=13]

[sub_resource type="StyleBoxFlat" id=3]
content_margin_left = 200.0
content_margin_right = 200.0
content_margin_top = 200.0
content_margin_bottom = 200.0
bg_color = Color( 0, 0, 0, 0.905882 )

[sub_resource type="StyleBoxFlat" id=5]
bg_color = Color( 0.215686, 0.207843, 0.247059, 1 )

[sub_resource type="Theme" id=4]
MenuButton/fonts/font = ExtResource( 11 )
MenuButton/styles/disabled = SubResource( 5 )
MenuButton/styles/focus = SubResource( 5 )
MenuButton/styles/hover = SubResource( 5 )
MenuButton/styles/normal = SubResource( 5 )
MenuButton/styles/pressed = SubResource( 5 )
OptionButton/fonts/font = ExtResource( 11 )
PopupMenu/fonts/font = ExtResource( 11 )

[sub_resource type="StyleBoxEmpty" id=1]
content_margin_left = 10.0
content_margin_right = 10.0
content_margin_top = 10.0
content_margin_bottom = 10.0

[sub_resource type="StyleBoxFlat" id=2]
content_margin_left = 20.0
content_margin_right = 20.0
content_margin_top = 20.0
content_margin_bottom = 20.0
bg_color = Color( 0, 0, 0, 0.623529 )
corner_radius_top_left = 50
corner_radius_top_right = 50
corner_radius_bottom_right = 50
corner_radius_bottom_left = 50

[sub_resource type="StyleBoxFlat" id=7]
content_margin_left = 15.0
content_margin_right = 15.0
content_margin_top = 15.0
content_margin_bottom = 15.0
bg_color = Color( 0, 0, 0, 0.92549 )
corner_radius_top_left = 15
corner_radius_top_right = 15
corner_radius_bottom_right = 15
corner_radius_bottom_left = 15

[node name="Chemixer" type="Node2D"]
script = ExtResource( 3 )

[node name="MainMenu" type="Control" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 1080.0
margin_bottom = 2160.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MenuBackground" type="PanelContainer" parent="MainMenu"]
anchor_right = 1.0
anchor_bottom = 1.0
focus_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
custom_styles/panel = SubResource( 3 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MenuOptions" type="VBoxContainer" parent="MainMenu/MenuBackground"]
margin_left = 200.0
margin_top = 200.0
margin_right = 880.0
margin_bottom = 1960.0
custom_constants/separation = 50

[node name="Logo" type="TextureRect" parent="MainMenu/MenuBackground/MenuOptions"]
visible = false
margin_right = 680.0
margin_bottom = 200.0
rect_min_size = Vector2( 0, 200 )
texture = ExtResource( 7 )
stretch_mode = 6

[node name="TitleLabel" type="Label" parent="MainMenu/MenuBackground/MenuOptions"]
margin_right = 680.0
margin_bottom = 124.0
custom_fonts/font = ExtResource( 10 )
text = "Chemixer"
align = 1
valign = 1

[node name="Spacer" type="Control" parent="MainMenu/MenuBackground/MenuOptions"]
margin_top = 174.0
margin_right = 680.0
margin_bottom = 274.0
rect_min_size = Vector2( 0, 100 )

[node name="CreateTaskButton" type="Button" parent="MainMenu/MenuBackground/MenuOptions"]
margin_top = 324.0
margin_right = 680.0
margin_bottom = 524.0
rect_min_size = Vector2( 0, 200 )
custom_fonts/font = ExtResource( 8 )
text = "Create a new task"

[node name="SolveTaskContainer" type="HBoxContainer" parent="MainMenu/MenuBackground/MenuOptions"]
margin_top = 574.0
margin_right = 680.0
margin_bottom = 774.0
custom_constants/separation = 20

[node name="SolveTaskButton" type="Button" parent="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer"]
margin_right = 401.0
margin_bottom = 200.0
rect_min_size = Vector2( 0, 200 )
custom_fonts/font = ExtResource( 8 )
text = "Solve an existing task"

[node name="TaskSelector" type="OptionButton" parent="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer"]
margin_left = 421.0
margin_right = 680.0
margin_bottom = 200.0
rect_min_size = Vector2( 200, 200 )
size_flags_horizontal = 3
theme = SubResource( 4 )
text = "hello"
script = ExtResource( 12 )

[node name="ExperimentButton" type="Button" parent="MainMenu/MenuBackground/MenuOptions"]
margin_top = 824.0
margin_right = 680.0
margin_bottom = 1024.0
rect_min_size = Vector2( 0, 200 )
custom_fonts/font = ExtResource( 8 )
text = "Watch an experiment"

[node name="SandboxButton" type="Button" parent="MainMenu/MenuBackground/MenuOptions"]
margin_top = 1074.0
margin_right = 680.0
margin_bottom = 1274.0
rect_min_size = Vector2( 0, 200 )
custom_fonts/font = ExtResource( 8 )
text = "Sandbox mode"

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="Background" type="TextureRect" parent="ParallaxBackground"]
show_behind_parent = true
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -540.0
margin_top = -1080.0
margin_right = 540.0
margin_bottom = 1120.0
texture = ExtResource( 4 )
expand = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SmallVialSpawnPoint" type="Position2D" parent="."]
position = Vector2( 880, 974 )

[node name="BlobSpawnPoint" type="Position2D" parent="."]
position = Vector2( 880, 724 )

[node name="MainVial" parent="." instance=ExtResource( 2 )]
position = Vector2( 549.213, 1817.26 )

[node name="StirringRod" parent="." instance=ExtResource( 9 )]
position = Vector2( 110, 1639.39 )

[node name="GUI" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ControlPanel" type="PanelContainer" parent="GUI"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = 2008.0
margin_right = 1080.0
margin_bottom = 2160.0
custom_styles/panel = SubResource( 1 )
__meta__ = {
"_edit_group_": true,
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/ControlPanel"]
margin_left = 10.0
margin_top = 10.0
margin_right = 1070.0
margin_bottom = 142.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_constants/separation = 50
__meta__ = {
"_edit_use_anchors_": false
}

[node name="NewVialButton" type="Button" parent="GUI/ControlPanel/HBoxContainer"]
margin_right = 130.0
margin_bottom = 132.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_colors/font_color = Color( 0, 0, 0, 1 )
custom_colors/font_color_hover = Color( 0, 0, 0, 1 )
custom_fonts/font = ExtResource( 5 )

[node name="Label" type="Label" parent="GUI/ControlPanel/HBoxContainer/NewVialButton"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_fonts/font = ExtResource( 5 )
text = "New Small Vial"
align = 1
valign = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ClearVialsButton" type="Button" parent="GUI/ControlPanel/HBoxContainer"]
margin_left = 180.0
margin_right = 310.0
margin_bottom = 132.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 5 )
text = "Save Task"

[node name="SpawnBlobButton" type="Button" parent="GUI/ControlPanel/HBoxContainer"]
margin_left = 360.0
margin_right = 495.0
margin_bottom = 132.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 5 )
text = "Spawn Blob"

[node name="ClearFluidsButton" type="Button" parent="GUI/ControlPanel/HBoxContainer"]
margin_left = 545.0
margin_right = 675.0
margin_bottom = 132.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 5 )
text = "Main Menu"

[node name="CompoundSelect" type="OptionButton" parent="GUI/ControlPanel/HBoxContainer"]
margin_left = 725.0
margin_right = 933.0
margin_bottom = 132.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 5 )
text = "Select Compound"
script = ExtResource( 1 )

[node name="TaskListButton" type="Button" parent="GUI/ControlPanel/HBoxContainer"]
margin_left = 983.0
margin_right = 1059.0
margin_bottom = 132.0
rect_min_size = Vector2( 50, 0 )
text = "show files"

[node name="CurrentStats" type="PanelContainer" parent="GUI"]
margin_left = 10.0
margin_top = 56.0
margin_right = 531.0
margin_bottom = 256.0
rect_min_size = Vector2( 0, 200 )
custom_styles/panel = SubResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/CurrentStats"]
margin_left = 20.0
margin_top = 20.0
margin_right = 501.0
margin_bottom = 180.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="MaterialsLabel" type="Label" parent="GUI/CurrentStats/VBoxContainer"]
margin_right = 481.0
margin_bottom = 69.0
custom_fonts/font = ExtResource( 8 )
text = "Currently used compounds:"
align = 1

[node name="StepList" type="PanelContainer" parent="GUI"]
visible = false
margin_left = 10.0
margin_top = 56.0
margin_right = 530.997
margin_bottom = 256.0
rect_min_size = Vector2( 0, 200 )
custom_styles/panel = SubResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/StepList"]
margin_left = 20.0
margin_top = 20.0
margin_right = 500.997
margin_bottom = 180.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="MaterialsLabel" type="Label" parent="GUI/StepList/VBoxContainer"]
margin_right = 480.0
margin_bottom = 69.0
custom_fonts/font = ExtResource( 8 )
text = "Step List:"
align = 1

[node name="TaskController" type="Node" parent="."]
script = ExtResource( 6 )

[node name="Label" type="Label" parent="TaskController"]
visible = false
margin_left = 307.0
margin_top = 1134.25
margin_right = 738.0
margin_bottom = 1487.25
custom_colors/font_color = Color( 1, 0, 0, 1 )
custom_fonts/font = ExtResource( 5 )
text = "dasdasdasdasdad"
autowrap = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AnswerPanel" type="PanelContainer" parent="TaskController"]
visible = false
margin_left = 99.0
margin_top = 635.773
margin_right = 999.0
margin_bottom = 1935.77
custom_styles/panel = SubResource( 7 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="TaskController/AnswerPanel"]
margin_left = 15.0
margin_top = 15.0
margin_right = 885.0
margin_bottom = 1285.0
custom_constants/separation = 20

[node name="FinishedLabel" type="Label" parent="TaskController/AnswerPanel/VBoxContainer"]
margin_right = 870.0
margin_bottom = 124.0
custom_fonts/font = ExtResource( 10 )
text = "Animation finished!"
align = 1
valign = 1

[node name="Spacer2" type="Control" parent="TaskController/AnswerPanel/VBoxContainer"]
margin_top = 144.0
margin_right = 870.0
margin_bottom = 272.0
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.2

[node name="TaskLabel" type="Label" parent="TaskController/AnswerPanel/VBoxContainer"]
margin_top = 292.0
margin_right = 870.0
margin_bottom = 505.0
custom_fonts/font = ExtResource( 8 )
text = "Your task is to list the percentages of all chemical compounds after the last step of the task."
align = 1
valign = 1
autowrap = true

[node name="Spacer" type="Control" parent="TaskController/AnswerPanel/VBoxContainer"]
margin_top = 525.0
margin_right = 870.0
margin_bottom = 1169.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ControlButtons" type="HBoxContainer" parent="TaskController/AnswerPanel/VBoxContainer"]
margin_top = 1189.0
margin_right = 870.0
margin_bottom = 1269.0
rect_min_size = Vector2( 0, 80 )
size_flags_horizontal = 3
custom_constants/separation = 10

[node name="CheckButton" type="Button" parent="TaskController/AnswerPanel/VBoxContainer/ControlButtons"]
margin_right = 283.0
margin_bottom = 80.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_colors/font_color_focus = Color( 0.266667, 0.823529, 0.0627451, 1 )
custom_colors/font_color = Color( 0.266667, 0.823529, 0.0627451, 1 )
custom_colors/font_color_hover = Color( 0.266667, 0.823529, 0.0627451, 1 )
custom_colors/font_color_pressed = Color( 0.266667, 0.823529, 0.0627451, 1 )
custom_fonts/font = ExtResource( 8 )
text = "Check"

[node name="ReplayButton" type="Button" parent="TaskController/AnswerPanel/VBoxContainer/ControlButtons"]
margin_left = 293.0
margin_right = 576.0
margin_bottom = 80.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_colors/font_color_focus = Color( 0.243137, 0.556863, 0.827451, 1 )
custom_colors/font_color = Color( 0.243137, 0.556863, 0.827451, 1 )
custom_colors/font_color_hover = Color( 0.243137, 0.556863, 0.827451, 1 )
custom_colors/font_color_pressed = Color( 0.243137, 0.556863, 0.827451, 1 )
custom_fonts/font = ExtResource( 8 )
text = "Replay"

[node name="MenuButton" type="Button" parent="TaskController/AnswerPanel/VBoxContainer/ControlButtons"]
margin_left = 586.0
margin_right = 870.0
margin_bottom = 80.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_fonts/font = ExtResource( 8 )
text = "Main Menu"

[node name="AnimationController" type="Node" parent="."]
script = ExtResource( 13 )

[node name="MoveTwin" type="Tween" parent="AnimationController"]

[node name="RotateTwin" type="Tween" parent="AnimationController"]

[node name="MainVialRestPoint" type="Position2D" parent="AnimationController"]
position = Vector2( 549.213, 1817.26 )

[node name="SmallVialSpawnPoint" type="Position2D" parent="AnimationController"]
position = Vector2( 880, 974 )

[node name="StirringRodRestPoint" type="Position2D" parent="AnimationController"]
position = Vector2( 110, 1639.39 )

[node name="StirringRodBeforeMix" type="Position2D" parent="AnimationController"]
position = Vector2( 641, 1274.51 )

[node name="StirringRodMixPoint1" type="Position2D" parent="AnimationController"]
position = Vector2( 492, 1639.39 )

[node name="StirringRodMixPoint2" type="Position2D" parent="AnimationController"]
position = Vector2( 660.793, 1639.39 )

[node name="RestTimer" type="Timer" parent="AnimationController"]
wait_time = 0.5
one_shot = true

[connection signal="animation_vial_spawned" from="." to="AnimationController" method="_on_Chemixer_animation_vial_spawned"]
[connection signal="mixture_color_changed" from="." to="MainVial" method="_on_Chemixer_mixture_color_changed"]
[connection signal="task_ready" from="." to="TaskController" method="_on_Chemixer_task_ready"]
[connection signal="toggle_input" from="." to="MainVial" method="_on_Chemixer_toggle_input"]
[connection signal="toggle_input" from="." to="StirringRod" method="_on_Chemixer_toggle_input"]
[connection signal="pressed" from="MainMenu/MenuBackground/MenuOptions/CreateTaskButton" to="." method="_on_CreateTaskButton_pressed"]
[connection signal="pressed" from="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer/SolveTaskButton" to="TaskController" method="_on_SolveTaskButton_pressed"]
[connection signal="item_selected" from="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer/TaskSelector" to="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer/TaskSelector" method="_on_TaskSelector_item_selected"]
[connection signal="selected_task_changed" from="MainMenu/MenuBackground/MenuOptions/SolveTaskContainer/TaskSelector" to="TaskController" method="_on_TaskSelector_selected_task_changed"]
[connection signal="pressed" from="MainMenu/MenuBackground/MenuOptions/ExperimentButton" to="." method="_on_ExperimentButton_pressed"]
[connection signal="pressed" from="MainMenu/MenuBackground/MenuOptions/SandboxButton" to="." method="_on_SandboxButton_pressed"]
[connection signal="blob_poured_in" from="MainVial" to="." method="_on_MainVial_blob_poured_in"]
[connection signal="blob_poured_in" from="MainVial" to="TaskController" method="_on_MainVial_blob_poured_in"]
[connection signal="blob_poured_out" from="MainVial" to="." method="_on_MainVial_blob_poured_out"]
[connection signal="blob_poured_out" from="MainVial" to="TaskController" method="_on_MainVial_blob_poured_out"]
[connection signal="mix" from="MainVial" to="." method="_on_MainVial_mix"]
[connection signal="mix" from="MainVial" to="TaskController" method="_on_MainVial_mix"]
[connection signal="pressed" from="GUI/ControlPanel/HBoxContainer/NewVialButton" to="." method="_on_NewVialButton_pressed"]
[connection signal="pressed" from="GUI/ControlPanel/HBoxContainer/ClearVialsButton" to="." method="_on_ClearVialsButton_pressed"]
[connection signal="pressed" from="GUI/ControlPanel/HBoxContainer/SpawnBlobButton" to="." method="_on_SpawnBlobButton_pressed"]
[connection signal="pressed" from="GUI/ControlPanel/HBoxContainer/ClearFluidsButton" to="." method="_on_ClearFluidsButton_pressed"]
[connection signal="item_selected" from="GUI/ControlPanel/HBoxContainer/CompoundSelect" to="." method="_on_CompoundSelect_item_selected"]
[connection signal="pressed" from="GUI/ControlPanel/HBoxContainer/TaskListButton" to="TaskController" method="_on_TaskListButton_pressed"]
[connection signal="step_entries_loaded" from="TaskController" to="." method="_on_TaskController_step_entries_loaded"]
[connection signal="task_loaded" from="TaskController" to="AnimationController" method="_on_TaskController_task_loaded"]
[connection signal="pressed" from="TaskController/AnswerPanel/VBoxContainer/ControlButtons/CheckButton" to="TaskController" method="_on_CheckButton_pressed"]
[connection signal="animation_completed" from="AnimationController" to="TaskController" method="_on_AnimationController_animation_completed"]
[connection signal="spawn_blob" from="AnimationController" to="." method="_on_AnimationController_spawn_blob"]
